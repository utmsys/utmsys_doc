<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Algorithm_Development/SIMULATOR/SITL/Gazebo/Sensor/D435i/ros2 humble realsense d435i in gazebo · Issue 1070 · introlabrtabmap_ros" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">ros2 humble realsense d435i in gazebo · Issue 1070 · introlabrtabmap_ros | UTMSYS</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://wiki.utmsys.org/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://wiki.utmsys.org/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://wiki.utmsys.org/en/Algorithm_Development/SIMULATOR/SITL/Gazebo/Sensor/D435i/ros2 humble realsense d435i in gazebo · Issue 1070 · introlabrtabmap_ros"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ros2 humble realsense d435i in gazebo · Issue 1070 · introlabrtabmap_ros | UTMSYS"><meta data-rh="true" name="description" content="元-0816"><meta data-rh="true" property="og:description" content="元-0816"><link data-rh="true" rel="icon" href="/en/img/logo.png"><link data-rh="true" rel="canonical" href="https://wiki.utmsys.org/en/Algorithm_Development/SIMULATOR/SITL/Gazebo/Sensor/D435i/ros2 humble realsense d435i in gazebo · Issue 1070 · introlabrtabmap_ros"><link data-rh="true" rel="alternate" href="https://wiki.utmsys.org/en/Algorithm_Development/SIMULATOR/SITL/Gazebo/Sensor/D435i/ros2 humble realsense d435i in gazebo · Issue 1070 · introlabrtabmap_ros" hreflang="en"><link data-rh="true" rel="alternate" href="https://wiki.utmsys.org/Algorithm_Development/SIMULATOR/SITL/Gazebo/Sensor/D435i/ros2 humble realsense d435i in gazebo · Issue 1070 · introlabrtabmap_ros" hreflang="zh"><link data-rh="true" rel="alternate" href="https://wiki.utmsys.org/Algorithm_Development/SIMULATOR/SITL/Gazebo/Sensor/D435i/ros2 humble realsense d435i in gazebo · Issue 1070 · introlabrtabmap_ros" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"9. 算法开发","item":"https://wiki.utmsys.org/en/09_Algorithm_Development"},{"@type":"ListItem","position":2,"name":"9.5 仿真模拟器","item":"https://wiki.utmsys.org/en/05_SIMULATOR"},{"@type":"ListItem","position":3,"name":"ros2 humble realsense d435i in gazebo · Issue 1070 · introlabrtabmap_ros","item":"https://wiki.utmsys.org/en/Algorithm_Development/SIMULATOR/SITL/Gazebo/Sensor/D435i/ros2 humble realsense d435i in gazebo · Issue 1070 · introlabrtabmap_ros"}]}</script><link rel="stylesheet" href="/en/assets/css/styles.fdfcd1c3.css">
<script src="/en/assets/js/runtime~main.3992d520.js" defer="defer"></script>
<script src="/en/assets/js/main.0d1b3e64.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/en/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">UTMSYS</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en/UTMSYS介绍">Start</a><a href="https://www.utmsys.org/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/utmsys/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/en/Algorithm_Development/SIMULATOR/SITL/Gazebo/Sensor/D435i/ros2 humble realsense d435i in gazebo · Issue 1070 · introlabrtabmap_ros" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/Algorithm_Development/SIMULATOR/SITL/Gazebo/Sensor/D435i/ros2 humble realsense d435i in gazebo · Issue 1070 · introlabrtabmap_ros" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">简体中文</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/UTMSYS介绍">UTMSYS ORG</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/en/01_Product_Overview">1. 产品概述</a><button aria-label="Expand sidebar category &#x27;1. 产品概述&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/en/02_Hardware_Connection">2. 硬件连接</a><button aria-label="Expand sidebar category &#x27;2. 硬件连接&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/en/03_Image_Flash">3. 镜像烧录</a><button aria-label="Expand sidebar category &#x27;3. 镜像烧录&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/en/04_Terminal_Access">4. 终端访问</a><button aria-label="Expand sidebar category &#x27;4. 终端访问&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/en/05_System_Config">5. 系统配置</a><button aria-label="Expand sidebar category &#x27;5. 系统配置&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/en/06_Software_Install">6. 软件安装</a><button aria-label="Expand sidebar category &#x27;6. 软件安装&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/en/07_Data_Communication">7. 数据通信</a><button aria-label="Expand sidebar category &#x27;7. 数据通信&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/en/08_Application_Development">8. 应用开发</a><button aria-label="Expand sidebar category &#x27;8. 应用开发&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/en/09_Algorithm_Development">9. 算法开发</a><button aria-label="Collapse sidebar category &#x27;9. 算法开发&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/en/01_CV">9.1 计算机视觉</a><button aria-label="Expand sidebar category &#x27;9.1 计算机视觉&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/en/02_MISSION">9.2 飞行任务</a><button aria-label="Expand sidebar category &#x27;9.2 飞行任务&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/en/03_PLANNER">9.3 路径规划</a><button aria-label="Expand sidebar category &#x27;9.3 路径规划&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/en/04_SLAM">9.4 定位建图</a><button aria-label="Expand sidebar category &#x27;9.4 定位建图&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/en/05_SIMULATOR">9.5 仿真模拟器</a><button aria-label="Collapse sidebar category &#x27;9.5 仿真模拟器&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/Algorithm_Development/SIMULATOR/HITL/PX4+Gazebo硬件在环HIL仿真配置">HITL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/en/Algorithm_Development/SIMULATOR/SITL/AirSim/">SITL</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/en/Algorithm_Development/SIMULATOR/SITL/AirSim/">AirSim</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/en/Algorithm_Development/SIMULATOR/SITL/Gazebo/Docs/Gazebo Classic 与 Gazebo Harmonic 功能对比文档">Gazebo</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/Algorithm_Development/SIMULATOR/SITL/Gazebo/Docs/Gazebo Classic 与 Gazebo Harmonic 功能对比文档">Docs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/Algorithm_Development/SIMULATOR/SITL/Gazebo/Model/P450">Model</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/en/Algorithm_Development/SIMULATOR/SITL/Gazebo/PX4 SITL软件在环仿真">使用Gazebo仿真器</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/Algorithm_Development/SIMULATOR/SITL/Gazebo/Prometheus/PrometheusV3配置">Prometheus</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/en/Algorithm_Development/SIMULATOR/SITL/Gazebo/Sensor/D435i/Gazebo使用Realsense D435i SLAM&amp;PX4仿真">Sensor</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-6 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/en/Algorithm_Development/SIMULATOR/SITL/Gazebo/Sensor/D435i/Gazebo使用Realsense D435i SLAM&amp;PX4仿真">D435i</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-7 menu__list-item"><a class="menu__link" tabindex="0" href="/en/Algorithm_Development/SIMULATOR/SITL/Gazebo/Sensor/D435i/Gazebo使用Realsense D435i SLAM&amp;PX4仿真">Gazebo使用Realsense D435i SLAM&amp;PX4仿真</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-7 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/en/Algorithm_Development/SIMULATOR/SITL/Gazebo/Sensor/D435i/ros2 humble realsense d435i in gazebo · Issue 1070 · introlabrtabmap_ros">ros2 humble realsense d435i in gazebo · Issue 1070 · introlabrtabmap_ros</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/en/Algorithm_Development/SIMULATOR/SITL/Gazebo/World/">World</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/Algorithm_Development/SIMULATOR/SITL/IsaacSim/Pegasus 模拟器 — Pegasus 模拟器 文档">IsaacSim</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/Algorithm_Development/SIMULATOR/SITL/Mujoco/Mujoco 无人机">Mujoco</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/Algorithm_Development/SIMULATOR/SITL/PX4/EKF2_AID_MASK-EKF2_HGT_MODE视觉里程计调整">PX4</a></div></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/en/06_RL">9.6 强化学习</a><button aria-label="Expand sidebar category &#x27;9.6 强化学习&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/en/07_VLM">9.7 视觉语言模型</a><button aria-label="Expand sidebar category &#x27;9.7 视觉语言模型&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/en/08_HPC">9.8 高性能计算</a><button aria-label="Expand sidebar category &#x27;9.8 高性能计算&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/en/10_Debug_Commands">10. 调试命令</a><button aria-label="Expand sidebar category &#x27;10. 调试命令&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/en/11_Concepts">11. 相关概念</a><button aria-label="Expand sidebar category &#x27;11. 相关概念&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/en/12_FAQ">12. 常见问题</a><button aria-label="Expand sidebar category &#x27;12. 常见问题&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/en/13_Release">13. 发布日志</a><button aria-label="Expand sidebar category &#x27;13. 发布日志&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/en/09_Algorithm_Development"><span>9. 算法开发</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/en/05_SIMULATOR"><span>9.5 仿真模拟器</span></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">SITL</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Gazebo</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Sensor</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">D435i</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">ros2 humble realsense d435i in gazebo · Issue 1070 · introlabrtabmap_ros</span></li></ul></nav><div class="theme-doc-markdown markdown"><header><h1>ros2 humble realsense d435i in gazebo · Issue 1070 · introlabrtabmap_ros</h1></header><p><a href="https://github.com/yuan-0816" target="_blank" rel="noopener noreferrer">元-0816</a></p>
<p>我想在 Gazebo 中模拟 RealSense D435i，并使用 RTAB-Map 进行定位 。<br>
<!-- -->但是 RTAB-Map 无法接收摄像头主题。</p>
<p>这是我的 xacro 和启动文件。</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!--</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Aknolegment: This file was originally copied from the realsense repository of</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pal-robotics-forks( https://github.com/pal-robotics-forks/realsense/ )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">and then modified.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">License: Apache 2.0. See LICENSE file in root directory.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Copyright(c) 2017 PAL Robotics, S.L. All Rights Reserved</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">This is the Gazebo URDF model for the Intel RealSense D435i camera</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;robot xmlns:xacro=&quot;http://ros.org/wiki/xacro&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;xacro:macro name=&quot;gazebo_d435i&quot; params=&quot; reference_link</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            camera_name:=camera</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            topics_ns:=camera</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            depth_optical_frame</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            color_optical_frame</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            infrared1_optical_frame</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            infrared2_optical_frame</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            accel_optical_frame</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            gyro_optical_frame</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            visualize:=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            align_depth:=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            enable_pointCloud:=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            unite_imu_method:=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            accel_fps:=250</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            gyro_fps:=400</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            clip_distance:=-1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            depth_width:=1280</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            depth_height:=720</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            depth_fps:=30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            infra_width:=640</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            infra_height:=480</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            infra_fps:=30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            color_width:=1920</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            color_height:=1080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            color_fps:=30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            &quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;!-- Load parameters to model&#x27;s main link--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;xacro:property name=&quot;deg_to_rad&quot; value=&quot;0.01745329251994329577&quot;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;gazebo reference=&quot;${reference_link}&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;self_collide&gt;0&lt;/self_collide&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;enable_wind&gt;0&lt;/enable_wind&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;kinematic&gt;0&lt;/kinematic&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;!-- &lt;gravity&gt;1&lt;/gravity&gt; --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;!--&lt;mu&gt;1&lt;/mu&gt;--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;mu2&gt;1&lt;/mu2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;fdir1&gt;0 0 0&lt;/fdir1&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;!--&lt;slip1&gt;0&lt;/slip1&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;slip2&gt;0&lt;/slip2&gt;--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;kp&gt;1e+13&lt;/kp&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;kd&gt;1&lt;/kd&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;!--&lt;max_vel&gt;0.01&lt;/max_vel&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;min_depth&gt;0&lt;/min_depth&gt;--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;sensor name=&quot;${camera_name}color&quot; type=&quot;camera&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;camera name=&quot;${camera_name}&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;horizontal_fov&gt;${69.4*deg_to_rad}&lt;/horizontal_fov&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;image&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;width&gt;${color_width}&lt;/width&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;height&gt;${color_height}&lt;/height&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;format&gt;RGB_INT8&lt;/format&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/image&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;clip&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;near&gt;0.1&lt;/near&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;far&gt;100&lt;/far&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/clip&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;noise&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;type&gt;gaussian&lt;/type&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;mean&gt;0.0&lt;/mean&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;stddev&gt;0.007&lt;/stddev&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/noise&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/camera&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;always_on&gt;1&lt;/always_on&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;update_rate&gt;${color_fps}&lt;/update_rate&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;visualize&gt;${visualize}&lt;/visualize&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/sensor&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;sensor name=&quot;${camera_name}ired1&quot; type=&quot;camera&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;camera name=&quot;${camera_name}&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;horizontal_fov&gt;${85.2*deg_to_rad}&lt;/horizontal_fov&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;image&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;width&gt;${infra_width}&lt;/width&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;height&gt;${infra_height}&lt;/height&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;format&gt;L_INT8&lt;/format&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/image&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;clip&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;near&gt;0.1&lt;/near&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;far&gt;100&lt;/far&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/clip&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;noise&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;type&gt;gaussian&lt;/type&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;mean&gt;0.0&lt;/mean&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;stddev&gt;0.05&lt;/stddev&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/noise&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/camera&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;always_on&gt;1&lt;/always_on&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;update_rate&gt;${infra_fps}&lt;/update_rate&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;visualize&gt;false&lt;/visualize&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/sensor&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;sensor name=&quot;${camera_name}ired2&quot; type=&quot;camera&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;camera name=&quot;${camera_name}&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;horizontal_fov&gt;${85.2*deg_to_rad}&lt;/horizontal_fov&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;image&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;width&gt;${infra_width}&lt;/width&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;height&gt;${infra_height}&lt;/height&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;format&gt;L_INT8&lt;/format&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/image&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;clip&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;near&gt;0.1&lt;/near&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;far&gt;100&lt;/far&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/clip&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;noise&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;type&gt;gaussian&lt;/type&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;mean&gt;0.0&lt;/mean&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;stddev&gt;0.05&lt;/stddev&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/noise&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/camera&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;always_on&gt;1&lt;/always_on&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;update_rate&gt;${infra_fps}&lt;/update_rate&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;visualize&gt;false&lt;/visualize&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/sensor&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;sensor name=&quot;${camera_name}depth&quot; type=&quot;depth&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;camera name=&quot;${camera_name}&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;!-- align-depth settings --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;xacro:unless value=&quot;${align_depth}&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;horizontal_fov&gt;${85.2*deg_to_rad}&lt;/horizontal_fov&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;image&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &lt;width&gt;${depth_width}&lt;/width&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &lt;height&gt;${depth_height}&lt;/height&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;/image&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/xacro:unless&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;xacro:if value=&quot;${align_depth}&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;horizontal_fov&gt;${69.4*deg_to_rad}&lt;/horizontal_fov&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;image&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &lt;width&gt;${color_width}&lt;/width&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &lt;height&gt;${color_height}&lt;/height&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;/image&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/xacro:if&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;clip&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;near&gt;0.1&lt;/near&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;xacro:unless value=&quot;${clip_distance &gt; 0.0}&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &lt;far&gt;100&lt;/far&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;/xacro:unless&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;xacro:if value=&quot;${clip_distance &gt; 0.0}&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &lt;far&gt;${clip_distance}&lt;/far&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;/xacro:if&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/clip&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;noise&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;type&gt;gaussian&lt;/type&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;mean&gt;0.0&lt;/mean&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;stddev&gt;0.100&lt;/stddev&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/noise&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/camera&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;always_on&gt;1&lt;/always_on&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;xacro:unless value=&quot;${align_depth}&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;update_rate&gt;${depth_fps}&lt;/update_rate&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/xacro:unless&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;xacro:if value=&quot;${align_depth}&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;update_rate&gt;${color_fps}&lt;/update_rate&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/xacro:if&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;visualize&gt;false&lt;/visualize&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/sensor&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;!-- IMU --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;sensor name=&quot;${camera_name}imu&quot; type=&quot;imu&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;always_on&gt;true&lt;/always_on&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;update_rate&gt;${gyro_fps}&lt;/update_rate&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;!-- &lt;topic&gt;${camera_name}/imu/sample&lt;/topic&gt; --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;topic&gt;__default_topic__&lt;/topic&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;plugin name=&quot;${camera_name}imu&quot; filename=&quot;libgazebo_ros_imu_sensor.so&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;ros&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;!-- Will publish to /camera/imu --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;!-- &lt;namespace&gt;${camera_name}/imu&lt;/namespace&gt; --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;namespace&gt;/camera&lt;/namespace&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;remapping&gt;~/out:=imu&lt;/remapping&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/ros&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;bodyName&gt;${camera_name}_link&lt;/bodyName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;frameName&gt;${gyro_optical_frame}&lt;/frameName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;updateRateHZ&gt;${gyro_fps}&lt;/updateRateHZ&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;gaussianNoise&gt;0.1&lt;/gaussianNoise&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;xyzOffset&gt;0 0 0&lt;/xyzOffset&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;rpyOffset&gt;0 0 0&lt;/rpyOffset&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/sensor&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/gazebo&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;gazebo&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;plugin name=&quot;${topics_ns}&quot; filename=&quot;librealsense_gazebo_plugin.so&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;prefix&gt;${camera_name}&lt;/prefix&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;!-- Color camera settings --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;colorUpdateRate&gt;${color_fps}&lt;/colorUpdateRate&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;colorTopicName&gt;camera/color/image_raw&lt;/colorTopicName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;colorOpticalframeName&gt;${color_optical_frame}&lt;/colorOpticalframeName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;colorCameraInfoTopicName&gt;color/camera_info&lt;/colorCameraInfoTopicName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;!-- Infrared camera settings --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;infraredUpdateRate&gt;${infra_fps}&lt;/infraredUpdateRate&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;infrared1TopicName&gt;camera/infra1/image_rect_raw&lt;/infrared1TopicName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;infrared2TopicName&gt;camera/infra2/image_rect_raw&lt;/infrared2TopicName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;infrared1CameraInfoTopicName&gt;camera/infra1/camera_info&lt;/infrared1CameraInfoTopicName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;infrared2CameraInfoTopicName&gt;camera/infra2/camera_info&lt;/infrared2CameraInfoTopicName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;infrared1OpticalframeName&gt;${infrared1_optical_frame}&lt;/infrared1OpticalframeName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;infrared2OpticalframeName&gt;${infrared2_optical_frame}&lt;/infrared2OpticalframeName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;!-- Depth camera settings --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;rangeMinDepth&gt;0.2&lt;/rangeMinDepth&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;xacro:unless value=&quot;${clip_distance &gt; 0.0}&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;rangeMaxDepth&gt;10.0&lt;/rangeMaxDepth&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/xacro:unless&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;xacro:if value=&quot;${clip_distance &gt; 0.0}&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;rangeMaxDepth&gt;${clip_distance}&lt;/rangeMaxDepth&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/xacro:if&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;xacro:unless value=&quot;${align_depth}&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;depthUpdateRate&gt;${depth_fps}&lt;/depthUpdateRate&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;depthTopicName&gt;camera/depth/image_rect_raw&lt;/depthTopicName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;depthCameraInfoTopicName&gt;camera/depth/camera_info&lt;/depthCameraInfoTopicName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;depthOpticalframeName&gt;${depth_optical_frame}&lt;/depthOpticalframeName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/xacro:unless&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;xacro:if value=&quot;${align_depth}&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;depthUpdateRate&gt;${color_fps}&lt;/depthUpdateRate&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;depthTopicName&gt;camera/aligned_depth_to_color/image_raw&lt;/depthTopicName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;depthCameraInfoTopicName&gt;camera/aligned_depth_to_color/camera_info&lt;/depthCameraInfoTopicName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;depthOpticalframeName&gt;${color_optical_frame}&lt;/depthOpticalframeName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/xacro:if&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;!-- Pointlcloud settings --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;pointCloud&gt;${enable_pointCloud}&lt;/pointCloud&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;pointCloudTopicName&gt;depth/color/points&lt;/pointCloudTopicName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;pointCloudCutoff&gt;0.5&lt;/pointCloudCutoff&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;!-- &lt;ros&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;namespace&gt;/camera&lt;/namespace&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/ros&gt; --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/gazebo&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/xacro:macro&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/robot&gt;</span><br></span></code></pre></div></div>
<p>启动文件</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Requirements:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   A realsense D435i</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   Install realsense2 ros2 package (ros-$ROS_DISTRO-realsense2-camera)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   RTAB-Map in mapping mode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from launch import LaunchDescription, Substitution, LaunchContext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from launch.actions import DeclareLaunchArgument, SetEnvironmentVariable, LogInfo, OpaqueFunction</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from launch.substitutions import LaunchConfiguration, ThisLaunchFileDir, PythonExpression</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from launch.conditions import IfCondition, UnlessCondition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from launch_ros.actions import Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from launch_ros.actions import SetParameter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from typing import Text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from ament_index_python.packages import get_package_share_directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class ConditionalText(Substitution):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self, text_if, text_else, condition):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.text_if = text_if</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.text_else = text_else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.condition = condition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def perform(self, context: &#x27;LaunchContext&#x27;) -&gt; Text:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if self.condition == True or self.condition == &#x27;true&#x27; or self.condition == &#x27;True&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return self.text_if</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return self.text_else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def launch_setup(context, *args, **kwargs):     </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    use_sim_time = LaunchConfiguration(&#x27;use_sim_time&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    qos = LaunchConfiguration(&#x27;qos&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    localization = LaunchConfiguration(&#x27;localization&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    parameters={</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;frame_id&#x27;:&#x27;camera_link&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # &#x27;frame_id&#x27;:&#x27;camera_color_optical_frame&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;use_sim_time&#x27;:use_sim_time,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;subscribe_depth&#x27;:True,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;subscribe_odom_info&#x27;:True,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;approx_sync&#x27;:False,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;qos_image&#x27;:qos,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;qos_imu&#x27;:qos,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;wait_imu_to_init&#x27;:True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # /camera/infra1/image_rect_raw,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # /camera/depth/image_rect_raw,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # /camera/infra1/camera_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    remappings=[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          (&#x27;imu&#x27;, &#x27;/imu/data&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          (&#x27;rgb/image&#x27;, &#x27;/camera/infra1/image_rect_raw&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          (&#x27;rgb/camera_info&#x27;, &#x27;/camera/infra1/camera_info&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          (&#x27;depth/image&#x27;, &#x27;/camera/depth/image_rect_raw&#x27;)] </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # remappings=[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    #     (&#x27;rgb/image&#x27;, &#x27;/camera/camera/image_raw&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    #     (&#x27;rgb/camera_info&#x27;, &#x27;/camera/camera/camera_info&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    #     (&#x27;depth/image&#x27;, &#x27;/camera/camera/depth/image_raw&#x27;)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DeclareLaunchArgument(&#x27;args&#x27;,  default_value=LaunchConfiguration(&#x27;rtabmap_args&#x27;), </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              description=&#x27;Can be used to pass RTAB-Map\&#x27;s parameters or other flags like --udebug and --delete_db_on_start/-d&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Node(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            package=&#x27;rtabmap_odom&#x27;, executable=&#x27;rgbd_odometry&#x27;, output=&#x27;screen&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            parameters=[parameters],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            remappings=remappings),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # SLAM mode:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Node(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            condition=UnlessCondition(localization),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            package=&#x27;rtabmap_slam&#x27;, executable=&#x27;rtabmap&#x27;, output=&#x27;screen&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            parameters=[parameters],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            remappings=remappings,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            arguments=[&#x27;-d&#x27;]), # This will delete the previous database (~/.ros/rtabmap.db)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Localization mode:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Node(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            condition=IfCondition(localization),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            package=&#x27;rtabmap_slam&#x27;, executable=&#x27;rtabmap&#x27;, output=&#x27;screen&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            parameters=[parameters,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              {&#x27;Mem/IncrementalMemory&#x27;:&#x27;False&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &#x27;Mem/InitWMWithAllNodes&#x27;:&#x27;True&#x27;}],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            remappings=remappings),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Node(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            package=&#x27;rtabmap_viz&#x27;, executable=&#x27;rtabmap_viz&#x27;, output=&#x27;screen&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            parameters=[parameters],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            condition=IfCondition(LaunchConfiguration(&quot;rtabmap_viz&quot;)),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            remappings=remappings),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Node(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            package=&#x27;rviz2&#x27;, executable=&#x27;rviz2&#x27;, output=&#x27;screen&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            condition=IfCondition(LaunchConfiguration(&quot;rviz&quot;)),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            arguments=[[&quot;-d&quot;], [LaunchConfiguration(&quot;rviz_cfg&quot;)]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Node(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            package=&#x27;rtabmap_util&#x27;, executable=&#x27;point_cloud_xyzrgb&#x27;, output=&#x27;screen&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            condition=IfCondition(LaunchConfiguration(&quot;rviz&quot;)),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            parameters=[{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;decimation&quot;: 4,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;voxel_size&quot;: 0.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;approx_sync&quot;: LaunchConfiguration(&#x27;approx_sync&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;approx_sync_max_interval&quot;: LaunchConfiguration(&#x27;approx_sync_max_interval&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            remappings=remappings),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Compute quaternion of the IMU</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Node(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            package=&#x27;imu_filter_madgwick&#x27;, executable=&#x27;imu_filter_madgwick_node&#x27;, output=&#x27;screen&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            parameters=[{&#x27;use_mag&#x27;: False, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         &#x27;world_frame&#x27;:&#x27;enu&#x27;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         &#x27;publish_tf&#x27;:False}],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            remappings=[(&#x27;imu/data_raw&#x27;, &#x27;/camera/imu&#x27;)]),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # The IMU frame is missing in TF tree, add it:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Node(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        #     package=&#x27;tf2_ros&#x27;, executable=&#x27;static_transform_publisher&#x27;, output=&#x27;screen&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        #     arguments=[&#x27;0&#x27;, &#x27;0&#x27;, &#x27;0&#x27;, &#x27;0&#x27;, &#x27;0&#x27;, &#x27;0&#x27;, &#x27;camera_gyro_optical_frame&#x27;, &#x27;camera_imu_optical_frame&#x27;]),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def generate_launch_description():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    config_rviz = os.path.join(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        get_package_share_directory(&#x27;AirLab_in_gazebo&#x27;), &#x27;configs&#x27;, &#x27;sim.rviz&#x27;)   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return LaunchDescription([</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Declare Launch Argument</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DeclareLaunchArgument(&#x27;approx_sync&#x27;, default_value=&#x27;false&#x27;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              description=&#x27;If timestamps of the input topics should be synchronized using approximate or exact time policy.&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DeclareLaunchArgument(&#x27;approx_sync_max_interval&#x27;, default_value=&#x27;0.0&#x27;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              description=&#x27;(sec) 0 means infinite interval duration (used with approx_sync=true)&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DeclareLaunchArgument(&#x27;database_path&#x27;, default_value=&#x27;~/ros2_ws/src/drone_vslam/map_database/rtabmap.db&#x27;,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              description=&#x27;Where is the map saved/loaded.&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DeclareLaunchArgument(&#x27;localization&#x27;, default_value=&#x27;false&#x27;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              description=&#x27;Launch in localization mode.&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DeclareLaunchArgument(&#x27;rtabmap_viz&#x27;, default_value=&#x27;false&#x27;,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              description=&#x27;Launch RTAB-Map UI (optional).&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DeclareLaunchArgument(&#x27;rviz&#x27;, default_value=&#x27;true&#x27;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              description=&#x27;Launch RVIZ (optional).&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DeclareLaunchArgument(&#x27;rviz_cfg&#x27;, default_value=config_rviz, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              description=&#x27;Configuration path of rviz2.&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DeclareLaunchArgument(&#x27;initial_pose&#x27;, default_value=&#x27;&#x27;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              description=&#x27;Set an initial pose (only in localization mode). Format: &quot;x y z roll pitch yaw&quot; or &quot;x y z qx qy qz qw&quot;. Default: see &quot;RGBD/StartAtOrigin&quot; doc&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DeclareLaunchArgument(&#x27;rtabmap_args&#x27;,   default_value=&#x27;&#x27;,                   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              description=&#x27;Backward compatibility, use &quot;args&quot; instead.&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DeclareLaunchArgument(&#x27;use_sim_time&#x27;, default_value=&#x27;true&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              description=&#x27;Use simulation (Gazebo) clock if true&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DeclareLaunchArgument(&#x27;qos&#x27;, default_value=&#x27;2&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              description=&#x27;QoS used for input sensor topics&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        OpaqueFunction(function=launch_setup)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ])</span><br></span></code></pre></div></div>
<p>我可以使用 ros2 主题列表看到 RealSense D435i 的主题，但 RTAB-Map 显示错误。</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ros2 launch AirLab_in_gazebo rtabmap.launch.py </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] [launch]: All log files can be found below /home/yuan/.ros/log/2023-11-23-23-09-47-685092-airlab-ubuntu-48020</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] [launch]: Default logging verbosity is set to INFO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] [rgbd_odometry-1]: process started with pid [48021]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] [rtabmap-2]: process started with pid [48023]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] [rviz2-3]: process started with pid [48025]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] [point_cloud_xyzrgb-4]: process started with pid [48027]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] [imu_filter_madgwick_node-5]: process started with pid [48029]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rviz2-3] Warning: Ignoring XDG_SESSION_TYPE=wayland on Gnome. Use QT_QPA_PLATFORM=wayland to run on Wayland anyway.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[imu_filter_madgwick_node-5] [INFO] [1700752187.906796975] [imu_filter_madgwick]: Starting ImuFilter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[imu_filter_madgwick_node-5] [INFO] [1700752187.907461693] [imu_filter_madgwick]: Using dt computed from message headers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[imu_filter_madgwick_node-5] [INFO] [1700752187.907903148] [imu_filter_madgwick]: The gravity vector is kept in the IMU message.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[imu_filter_madgwick_node-5] [INFO] [1700752187.908067206] [imu_filter_madgwick]: Imu filter gain set to 0.100000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[imu_filter_madgwick_node-5] [INFO] [1700752187.908220104] [imu_filter_madgwick]: Gyro drift bias set to 0.000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[imu_filter_madgwick_node-5] [INFO] [1700752187.908376629] [imu_filter_madgwick]: Magnetometer bias values: 0.000000 0.000000 0.000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[imu_filter_madgwick_node-5] [INFO] [1700752187.951302037] [imu_filter_madgwick]: First IMU message received.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[point_cloud_xyzrgb-4] [INFO] [1700752188.383917664] [point_cloud_xyzrgb]: Approximate time sync = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rviz2-3] [INFO] [1700752188.410883286] [rviz2]: Stereo is NOT SUPPORTED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rviz2-3] [INFO] [1700752188.414315875] [rviz2]: OpenGl version: 4.3 (GLSL 4.3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.414934083] [rgbd_odometry]: Odometry: frame_id               = camera_link</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.416136494] [rgbd_odometry]: Odometry: odom_frame_id          = odom</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.416373735] [rgbd_odometry]: Odometry: publish_tf             = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.416484769] [rgbd_odometry]: Odometry: wait_for_transform     = 0.100000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.416590021] [rgbd_odometry]: Odometry: log_to_rosout_level    = 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.416710049] [rgbd_odometry]: Odometry: initial_pose           = xyz=0.000000,0.000000,0.000000 rpy=0.000000,-0.000000,0.000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.416803205] [rgbd_odometry]: Odometry: ground_truth_frame_id  = </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.417031991] [rgbd_odometry]: Odometry: ground_truth_base_frame_id = camera_link</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.417293246] [rgbd_odometry]: Odometry: config_path            = </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.417418053] [rgbd_odometry]: Odometry: publish_null_when_lost = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.417525544] [rgbd_odometry]: Odometry: guess_frame_id         = </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.417676668] [rgbd_odometry]: Odometry: guess_min_translation  = 0.000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.417786843] [rgbd_odometry]: Odometry: guess_min_rotation     = 0.000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.417979396] [rgbd_odometry]: Odometry: guess_min_time         = 0.000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.418092004] [rgbd_odometry]: Odometry: expected_update_rate   = 0.000000 Hz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.418207894] [rgbd_odometry]: Odometry: max_update_rate        = 0.000000 Hz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.418310645] [rgbd_odometry]: Odometry: min_update_rate        = 0.000000 Hz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.418412511] [rgbd_odometry]: Odometry: wait_imu_to_init       = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.418527562] [rgbd_odometry]: Odometry: stereoParams_=0 visParams_=1 icpParams_=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.517090366] [rgbd_odometry]: odometry: Subscribing to IMU topic /imu/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.517746443] [rgbd_odometry]: odometry: qos_imu = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.520287700] [rgbd_odometry]: RGBDOdometry: approx_sync    = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.520651535] [rgbd_odometry]: RGBDOdometry: queue_size     = 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.520814326] [rgbd_odometry]: RGBDOdometry: qos            = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.520932233] [rgbd_odometry]: RGBDOdometry: qos_camera_info = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.521042385] [rgbd_odometry]: RGBDOdometry: subscribe_rgbd = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.521151625] [rgbd_odometry]: RGBDOdometry: rgbd_cameras   = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.521260708] [rgbd_odometry]: RGBDOdometry: keep_color     = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752188.525943058] [rgbd_odometry]: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] rgbd_odometry subscribed to (exact sync):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1]    /camera/infra1/image_rect_raw,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1]    /camera/depth/image_rect_raw,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1]    /camera/infra1/camera_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rviz2-3] [INFO] [1700752188.527412921] [rviz2]: Stereo is NOT SUPPORTED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.582625663] [rtabmap]: rtabmap(maps): map_filter_radius          = 0.000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.582792715] [rtabmap]: rtabmap(maps): map_filter_angle           = 30.000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.582799918] [rtabmap]: rtabmap(maps): map_cleanup                = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.582802260] [rtabmap]: rtabmap(maps): map_always_update          = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.582805453] [rtabmap]: rtabmap(maps): map_empty_ray_tracing      = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.582807494] [rtabmap]: rtabmap(maps): cloud_output_voxelized     = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.582809449] [rtabmap]: rtabmap(maps): cloud_subtract_filtering   = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.582811434] [rtabmap]: rtabmap(maps): cloud_subtract_filtering_min_neighbors = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.582842066] [rtabmap]: rtabmap(maps): octomap_tree_depth         = 16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.636528314] [rtabmap]: rtabmap: frame_id      = camera_link</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.636949700] [rtabmap]: rtabmap: map_frame_id  = map</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.637108394] [rtabmap]: rtabmap: log_to_rosout_level  = 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.637222744] [rtabmap]: rtabmap: initial_pose  = </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.637332906] [rtabmap]: rtabmap: use_action_for_goal  = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.637567326] [rtabmap]: rtabmap: tf_delay      = 0.050000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.637710874] [rtabmap]: rtabmap: tf_tolerance  = 0.100000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.637820028] [rtabmap]: rtabmap: odom_sensor_sync   = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.638086276] [rtabmap]: rtabmap: gen_scan  = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.638210921] [rtabmap]: rtabmap: gen_depth  = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.757793219] [rtabmap]: RTAB-Map detection rate = 1.000000 Hz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.761995410] [rtabmap]: rtabmap: Deleted database &quot;/home/yuan/.ros/rtabmap.db&quot; (--delete_db_on_start or -d are set).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.762342135] [rtabmap]: rtabmap: Using database from &quot;/home/yuan/.ros/rtabmap.db&quot; (0 MB).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.824142561] [rtabmap]: rtabmap: Database version = &quot;0.21.1&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.827641152] [rtabmap]: rtabmap: SLAM mode (Mem/IncrementalMemory=true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.962759328] [rtabmap]: Setup callbacks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.963959838] [rtabmap]: rtabmap: subscribe_depth = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.963991957] [rtabmap]: rtabmap: subscribe_rgb = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.963995694] [rtabmap]: rtabmap: subscribe_stereo = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.963998212] [rtabmap]: rtabmap: subscribe_rgbd = false (rgbd_cameras=1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.964000885] [rtabmap]: rtabmap: subscribe_odom_info = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.964003078] [rtabmap]: rtabmap: subscribe_user_data = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.964005392] [rtabmap]: rtabmap: subscribe_scan = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.964007749] [rtabmap]: rtabmap: subscribe_scan_cloud = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.964009725] [rtabmap]: rtabmap: subscribe_scan_descriptor = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.964012034] [rtabmap]: rtabmap: queue_size      = 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.964014303] [rtabmap]: rtabmap: qos_image       = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.964016414] [rtabmap]: rtabmap: qos_camera_info = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.964018362] [rtabmap]: rtabmap: qos_scan        = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.964020425] [rtabmap]: rtabmap: qos_odom        = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.964022449] [rtabmap]: rtabmap: qos_user_data   = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.964024395] [rtabmap]: rtabmap: approx_sync     = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.964032230] [rtabmap]: Setup depth callback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752188.995505127] [rtabmap]: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] rtabmap subscribed to (exact sync):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2]    /odom \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2]    /camera/infra1/image_rect_raw \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2]    /camera/depth/image_rect_raw \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2]    /camera/infra1/camera_info \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2]    /odom_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rviz2-3] [INFO] [1700752189.378253714] [rviz2]: Stereo is NOT SUPPORTED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rviz2-3] [INFO] [1700752189.382556392] [rviz2]: Stereo is NOT SUPPORTED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [WARN] [1700752193.530089150] [rgbd_odometry]: rgbd_odometry: Did not receive data since 5 seconds! Make sure the input topics are published (&quot;$ rostopic hz my_topic&quot;) and the timestamps in their header are set. Parameter &quot;approx_sync&quot; is false, which means that input topics should have all the exact timestamp for the callback to be called.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] rgbd_odometry subscribed to (exact sync):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1]    /camera/infra1/image_rect_raw,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1]    /camera/depth/image_rect_raw,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1]    /camera/infra1/camera_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [WARN] [1700752194.019042033] [rtabmap]: rtabmap: Did not receive data since 5 seconds! Make sure the input topics are published (&quot;$ rostopic hz my_topic&quot;) and the timestamps in their header are set. If topics are coming from different computers, make sure the clocks of the computers are synchronized (&quot;ntpdate&quot;). If topics are not published at the same rate, you could increase &quot;queue_size&quot; parameter (current=10). Parameter &quot;approx_sync&quot; is false, which means that input topics should have all the exact timestamp for the callback to be called.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] rtabmap subscribed to (exact sync):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2]    /odom \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2]    /camera/infra1/image_rect_raw \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2]    /camera/depth/image_rect_raw \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2]    /camera/infra1/camera_info \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2]    /odom_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">^C[WARNING] [launch]: user interrupted with ctrl-c (SIGINT)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752195.880895495] [rclcpp]: signal_handler(signum=2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[point_cloud_xyzrgb-4] [INFO] [1700752195.880898587] [rclcpp]: signal_handler(signum=2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752195.881748431] [rclcpp]: signal_handler(signum=2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [WARN] [1700752195.882585332] [rtabmap]: rtabmap: Did not receive data since 5 seconds! Make sure the input topics are published (&quot;$ rostopic hz my_topic&quot;) and the timestamps in their header are set. If topics are coming from different computers, make sure the clocks of the computers are synchronized (&quot;ntpdate&quot;). If topics are not published at the same rate, you could increase &quot;queue_size&quot; parameter (current=10). Parameter &quot;approx_sync&quot; is false, which means that input topics should have all the exact timestamp for the callback to be called.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] rtabmap subscribed to (exact sync):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2]    /odom \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2]    /camera/infra1/image_rect_raw \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2]    /camera/depth/image_rect_raw \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2]    /camera/infra1/camera_info \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2]    /odom_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rviz2-3] [INFO] [1700752195.882848604] [rclcpp]: signal_handler(signum=2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[imu_filter_madgwick_node-5] [INFO] [1700752195.884572765] [rclcpp]: signal_handler(signum=2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [WARN] [1700752195.888917444] [rgbd_odometry]: rgbd_odometry: Did not receive data since 5 seconds! Make sure the input topics are published (&quot;$ rostopic hz my_topic&quot;) and the timestamps in their header are set. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] rgbd_odometry subscribed to (exact sync):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1]    /camera/infra1/image_rect_raw,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1]    /camera/depth/image_rect_raw,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1]    /camera/infra1/camera_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752195.932880938] [rtabmap]: Parameters are not saved (No configuration file provided...)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] [imu_filter_madgwick_node-5]: process has finished cleanly [pid 48029]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] [point_cloud_xyzrgb-4]: process has finished cleanly [pid 48027]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] [rviz2-3]: process has finished cleanly [pid 48025]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ERROR] [rtabmap-2]: process[rtabmap-2] failed to terminate &#x27;5&#x27; seconds after receiving &#x27;SIGINT&#x27;, escalating to &#x27;SIGTERM&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ERROR] [rgbd_odometry-1]: process[rgbd_odometry-1] failed to terminate &#x27;5&#x27; seconds after receiving &#x27;SIGINT&#x27;, escalating to &#x27;SIGTERM&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] [rtabmap-2]: sending signal &#x27;SIGTERM&#x27; to process[rtabmap-2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] [rgbd_odometry-1]: sending signal &#x27;SIGTERM&#x27; to process[rgbd_odometry-1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] [INFO] [1700752200.887038270] [rclcpp]: signal_handler(signum=15)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rgbd_odometry-1] [INFO] [1700752200.887479670] [rclcpp]: signal_handler(signum=15)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] rtabmap: Saving database/long-term memory... (located at /home/yuan/.ros/rtabmap.db)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[rtabmap-2] rtabmap: Saving database/long-term memory...done! (located at /home/yuan/.ros/rtabmap.db, 0 MB)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] [rtabmap-2]: process has finished cleanly [pid 48023]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] [rgbd_odometry-1]: process has finished cleanly [pid 48021]</span><br></span></code></pre></div></div>
<p>“我在 Ubuntu 22.04 上使用 ROS2 Humble。”</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/Algorithm_Development/SIMULATOR/SITL/Gazebo/Sensor/D435i/Gazebo使用Realsense D435i SLAM&amp;PX4仿真"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Gazebo使用Realsense D435i SLAM&amp;PX4仿真</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/Algorithm_Development/SIMULATOR/SITL/Gazebo/World/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">World</div></a></nav></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.utmsys.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Homepage<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.utmsys.org/pages/contact/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Follow Us</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/utmsys" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@utmsys/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.facebook.com/profile.php?id=61574010301135/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.instagram.com/utmsys/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 utmsys.</div></div></div></footer></div>
</body>
</html>