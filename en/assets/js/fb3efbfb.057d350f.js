"use strict";(self.webpackChunkutm_doc=self.webpackChunkutm_doc||[]).push([[8971],{8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>c});var i=n(6540);const s={},o=i.createContext(s);function a(e){const t=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(o.Provider,{value:t},e.children)}},9810:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>c,default:()=>g,frontMatter:()=>a,metadata:()=>i,toc:()=>r});const i=JSON.parse('{"id":"Algorithm_Development/SIMULATOR/HITL/PX4 HITL","title":"PX4 HITL ","description":"PX4+Gazebo Hardware-in-the-Loop Simulation HITL","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/09_Algorithm_Development/05_SIMULATOR/02_HITL/PX4 HITL.md","sourceDirName":"09_Algorithm_Development/05_SIMULATOR/02_HITL","slug":"/Algorithm_Development/SIMULATOR/HITL/PX4 HITL","permalink":"/en/Algorithm_Development/SIMULATOR/HITL/PX4 HITL","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"PX4 HITL ","source":"https://wiki.utmsys.org/Algorithm_Development/SIMULATOR/HITL/PX4%20HITL%E7%A1%AC%E4%BB%B6%E5%9C%A8%E7%8E%AF%E4%BB%BF%E7%9C%9F"},"sidebar":"tutorialSidebar","previous":{"title":"HITL-PX4 Tutorial","permalink":"/en/Algorithm_Development/SIMULATOR/HITL/PX4 HITL Tutorial"},"next":{"title":"9.6 \u5f3a\u5316\u5b66\u4e60","permalink":"/en/06_RL"}}');var s=n(4848),o=n(8453);const a={title:"PX4 HITL ",source:"https://wiki.utmsys.org/Algorithm_Development/SIMULATOR/HITL/PX4%20HITL%E7%A1%AC%E4%BB%B6%E5%9C%A8%E7%8E%AF%E4%BB%BF%E7%9C%9F"},c=void 0,l={},r=[{value:"PX4+Gazebo Hardware-in-the-Loop Simulation HITL",id:"px4gazebo-hardware-in-the-loop-simulation-hitl",level:2},{value:"More information",id:"more-information",level:2}];function d(e){const t={a:"a",code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"px4gazebo-hardware-in-the-loop-simulation-hitl",children:"PX4+Gazebo Hardware-in-the-Loop Simulation HITL"}),"\n",(0,s.jsx)(t.p,{children:"1. Connect the flight controller to the computer via USB, open QGC, and select Vehicle Setup -> Security -> Hardware-in-the-Loop Simulation -> HILT enable."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://i-blog.csdnimg.cn/blog_migrate/1f8394e53ec5952d343f628b0e67bb68.png",alt:""})}),"\n",(0,s.jsx)(t.p,{children:"2. Select Vehicle Setup -> Airframe -> HILT Quadcopter X (you will need to restart the flight controller for this to take effect)."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://i-blog.csdnimg.cn/blog_migrate/8d0c0339b9075f877d9cbaa3b676bdc4.png",alt:""})}),"\n",(0,s.jsx)(t.p,{children:"3. Calibrate the RC remote control (if you don\u2019t have one, you can skip this step)."}),"\n",(0,s.jsx)(t.p,{children:"4. Open Application Settings -> General and keep only UDP in the connection options as shown below."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://i-blog.csdnimg.cn/blog_migrate/b70acb04807676098867a09b377e6ffd.png",alt:""})}),"\n",(0,s.jsxs)(t.p,{children:["5. Select Vehicle Setup -> Parameters and change the parameter ",(0,s.jsx)(t.a,{href:"http://docs.px4.io/main/zh/advanced_config/parameter_reference.html#COM_RC_IN_MODE",title:"COM_RC_IN_MODE",children:"COM_RC_IN_MODE"}),'. This parameter determines the remote control signal input mode. Since I am using a virtual remote control, I selected Joystick only. (The official website prompts you to select "Joystick/No RC Checks", but this option is not available in v1.13.3.) After changing this, the red warning prompt will no longer appear on the "Flight Mode" setting interface, and you can specify different flight modes for each channel.']}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://i-blog.csdnimg.cn/blog_migrate/45a25b08cb97fef138bdd953a25ca929.png",alt:""})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://i-blog.csdnimg.cn/blog_migrate/d0311bad8f9c7c08a24b53f9762ed568.png",alt:""})}),"\n",(0,s.jsxs)(t.p,{children:["6. Modify iris_hitl.sdf, find the tag of the file ",(0,s.jsx)(t.code,{children:"mavlink_interface plugin"}),", and change the ",(0,s.jsx)(t.code,{children:"serialEnabled"})," and ",(0,s.jsx)(t.code,{children:"hil_mode"})," parameters to ",(0,s.jsx)(t.code,{children:"true"}),"."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-cobol",children:"roscd px4\n\nDONT_RUN=1 make px4_sitl_default gazebo-classic\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://i-blog.csdnimg.cn/blog_migrate/5b7bd5d46ceea6c00c4e5ff5522a4d96.png",alt:""})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://i-blog.csdnimg.cn/blog_migrate/f9e6d55b37b46650d9038658d76a2bc1.png",alt:""})}),"\n",(0,s.jsx)(t.p,{children:"7. Check whether the USB port name assigned to the flight controller by the computer is correct. The iris_hitl.sdf file uses /dev/ttyACM0 by default. If it is not this port, please change it to the corresponding one."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.img,{src:"https://i-blog.csdnimg.cn/blog_migrate/7b41327aa3a6b06dd577e206a06fb530.png",alt:""})," 8.source configure environment variables and run the simulation."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-cobol",children:"source Tools/simulation/gazebo-classic/setup_gazebo.bash $(pwd) $(pwd)/build/px4_sitl_default\n\ngazebo Tools/simulation/gazebo-classic/sitl_gazebo-classic/worlds/hitl_iris.world\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://i-blog.csdnimg.cn/blog_migrate/d69d5919f4bf25229963ac8b1cbeadf7.png",alt:""})}),"\n",(0,s.jsx)(t.p,{children:'Note: If the message "Serial port closed" appears, it is usually because QGC is not closed. You should close QGC first, run the two commands in 8, and then open QGC again.'}),"\n",(0,s.jsx)(t.p,{children:"9. The ground station is unlocked and the plane takes off successfully!"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.img,{src:"https://i-blog.csdnimg.cn/blog_migrate/e01838e787ef7b58f381aa8f735ea5fb.png",alt:""})," ",(0,s.jsx)(t.img,{src:"https://i-blog.csdnimg.cn/blog_migrate/8ea00c60ead6885cfdc004e7f2b8118c.png",alt:""})]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.img,{src:"https://i-blog.csdnimg.cn/blog_migrate/1f8394e53ec5952d343f628b0e67bb68.png",alt:""})," ",(0,s.jsx)(t.img,{src:"https://i-blog.csdnimg.cn/blog_migrate/8d0c0339b9075f877d9cbaa3b676bdc4.png",alt:""})," ",(0,s.jsx)(t.img,{src:"https://i-blog.csdnimg.cn/blog_migrate/b70acb04807676098867a09b377e6ffd.png",alt:""})," ",(0,s.jsx)(t.img,{src:"https://i-blog.csdnimg.cn/blog_migrate/45a25b08cb97fef138bdd953a25ca929.png",alt:""})," ",(0,s.jsx)(t.img,{src:"https://i-blog.csdnimg.cn/blog_migrate/d0311bad8f9c7c08a24b53f9762ed568.png",alt:""})," ",(0,s.jsx)(t.img,{src:"https://i-blog.csdnimg.cn/blog_migrate/5b7bd5d46ceea6c00c4e5ff5522a4d96.png",alt:""})," ",(0,s.jsx)(t.img,{src:"https://i-blog.csdnimg.cn/blog_migrate/f9e6d55b37b46650d9038658d76a2bc1.png",alt:""})," ",(0,s.jsx)(t.img,{src:"https://i-blog.csdnimg.cn/blog_migrate/7b41327aa3a6b06dd577e206a06fb530.png",alt:""})," ",(0,s.jsx)(t.img,{src:"https://i-blog.csdnimg.cn/blog_migrate/d69d5919f4bf25229963ac8b1cbeadf7.png",alt:""})," ",(0,s.jsx)(t.img,{src:"https://i-blog.csdnimg.cn/blog_migrate/e01838e787ef7b58f381aa8f735ea5fb.png",alt:""})," ",(0,s.jsx)(t.img,{src:"https://i-blog.csdnimg.cn/blog_migrate/8ea00c60ead6885cfdc004e7f2b8118c.png",alt:""})]}),"\n",(0,s.jsx)(t.h2,{id:"more-information",children:"More information"}),"\n",(0,s.jsxs)(t.p,{children:["Reference link: ",(0,s.jsx)(t.a,{href:"https://shiqi.blog.csdn.net/article/details/137450308",children:"https://shiqi.blog.csdn.net/article/details/137450308"})]})]})}function g(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);