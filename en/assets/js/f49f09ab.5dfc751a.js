"use strict";(self.webpackChunkutm_doc=self.webpackChunkutm_doc||[]).push([[6312],{8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>r});var i=t(6540);const l={},o=i.createContext(l);function s(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),i.createElement(o.Provider,{value:n},e.children)}},9074:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"Software_Install/Micro XRCE-DDS","title":"6.2 Micro XRCE-DDS ","description":"In order for ROS 2 to communicate with PX4, the uXRCE-DDS Client must be running on the PX4 and connected to the Micro XRCE-DDS Agent running on the companion computer, the RDK X5 Module.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/06_Software_Install/02_Micro XRCE-DDS.md","sourceDirName":"06_Software_Install","slug":"/Software_Install/Micro XRCE-DDS","permalink":"/en/Software_Install/Micro XRCE-DDS","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"6.2 Micro XRCE-DDS ","source":"https://wiki.utmsys.org/Software_Install/Micro%20XRCE-DDS"},"sidebar":"tutorialSidebar","previous":{"title":"6.1 TROS ","permalink":"/en/Software_Install/TROS"},"next":{"title":"6.3 QGroundControl ","permalink":"/en/Software_Install/QGroundControl"}}');var l=t(4848),o=t(8453);const s={title:"6.2 Micro XRCE-DDS ",source:"https://wiki.utmsys.org/Software_Install/Micro%20XRCE-DDS"},r=void 0,c={},a=[{value:"Micro XRCE-DDS Client",id:"micro-xrce-dds-client",level:2},{value:"Micro XRCE-DDS Agent",id:"micro-xrce-dds-agent",level:2},{value:"Installing the standalone",id:"installing-the-standalone",level:3},{value:"from Snap package",id:"from-snap-package",level:3},{value:"Building/",id:"building",level:3}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.p,{children:["In order for ROS 2 to communicate with PX4, ",(0,l.jsx)(n.a,{href:"https://docs.px4.io/main/en/modules/modules_system.html#uxrce-dds-client",children:"the uXRCE-DDS Client"})," must be running on the PX4 and connected to the Micro XRCE-DDS Agent running on the companion computer, the RDK X5 Module."]}),"\n",(0,l.jsx)(n.h2,{id:"micro-xrce-dds-client",children:"Micro XRCE-DDS Client"}),"\n",(0,l.jsxs)(n.p,{children:["The PX4 ",(0,l.jsx)(n.a,{href:"https://docs.px4.io/main/en/modules/modules_system.html#uxrce-dds-client",children:"uxrce_dds_client"})," is generated at build time and included by default in the PX4 firmware; no additional installation is required."]}),"\n",(0,l.jsx)(n.h2,{id:"micro-xrce-dds-agent",children:"Micro XRCE-DDS Agent"}),"\n",(0,l.jsx)(n.p,{children:"The Micro XRCE-DDS Agent can be installed on a companion machine using a binary package, built and installed from source code, or built and run within a ROS 2 workspace. All of these methods will get all the dependencies needed to communicate with the client (such as FastCDR)."}),"\n",(0,l.jsx)(n.h3,{id:"installing-the-standalone",children:"Installing the standalone"}),"\n",(0,l.jsx)(n.p,{children:"On Ubuntu, you can build the Agent standalone version from source and install it using the following command:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-markdown",children:"git clone -b v2.4.2 https://github.com/eProsima/Micro-XRCE-DDS-Agent.git\ncd Micro-XRCE-DDS-Agent\nmkdir build\ncd build\ncmake ..\nmake\nsudo make install\nsudo ldconfig /usr/local/lib/\n"})}),"\n",(0,l.jsx)(n.p,{children:"To start the proxy and set up a connection to the uXRCE-DDS client running on the emulator:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-markdown",children:"MicroXRCEAgent udp4 -p 8888\n"})}),"\n",(0,l.jsx)(n.h3,{id:"from-snap-package",children:"from Snap package"}),"\n",(0,l.jsx)(n.p,{children:"Install from the snap package on Ubuntu using the following command:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-markdown",children:"sudo snap install micro-xrce-dds-agent --edge\n"})}),"\n",(0,l.jsx)(n.p,{children:"To start the agent, use the settings that connect to the uXRCE-DDS client running on the emulator (note that the command names are different when you build the agent locally):"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-markdown",children:"micro-xrce-dds-agent udp4 -p 8888\n"})}),"\n",(0,l.jsx)(n.h3,{id:"building",children:"Building/"}),"\n",(0,l.jsxs)(n.p,{children:["You can build and launch the agent within a ROS 2 workspace (or build it standalone and launch it from a workspace). You must have already ",(0,l.jsx)(n.a,{href:"https://docs.px4.io/main/en/ros2/user_guide.html#install-ros-2",children:"installed ROS 2 as described in the ROS 2 User Guide > Installing ROS 2"}),"."]}),"\n",(0,l.jsx)(n.p,{children:"To build an agent in ROS:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Create a workspace directory for the agent:","\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-markdown",children:"mkdir -p ~/px4_ros_uxrce_dds_ws/src\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Clone the source code of eProsima ",(0,l.jsx)(n.a,{href:"https://github.com/eProsima/Micro-XRCE-DDS-Agent",children:"Micro-XRCE-DDS-Agent"})," to ",(0,l.jsx)(n.code,{children:"/src"})," the directory ( ",(0,l.jsx)(n.code,{children:"main"})," default clone branch):","\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-markdown",children:"cd ~/px4_ros_uxrce_dds_ws/src\ngit clone -b v2.4.2 https://github.com/eProsima/Micro-XRCE-DDS-Agent.git\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Get the ROS 2 development environment and compile the workspace using the following commands ",(0,l.jsx)(n.code,{children:"colcon"}),":","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://docs.px4.io/main/en/middleware/uxrce_dds.html#humble",children:"humble"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://docs.px4.io/main/en/middleware/uxrce_dds.html#foxy",children:"foxy"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-markdown",children:"source /opt/ros/humble/setup.bash\ncolcon build\n"})}),"\n",(0,l.jsx)(n.code,{children:"/src"})," This will build all folders under it using the source toolchain."]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"To run the Micro XRCE-DDS Agent in a workspace:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Provide the source ",(0,l.jsx)(n.code,{children:"local_setup.bash"})," to make the executable available in the terminal (even if ",(0,l.jsx)(n.code,{children:"setup.bash"})," using a new terminal).","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://docs.px4.io/main/en/middleware/uxrce_dds.html#humble",children:"humble"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://docs.px4.io/main/en/middleware/uxrce_dds.html#foxy",children:"foxy"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-markdown",children:"source /opt/ros/humble/setup.bash\nsource install/local_setup.bash\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Start the agent with settings that connect to the uXRCE-DDS client running on the emulator:","\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-markdown",children:"MicroXRCEAgent udp4 -p 8888\n"})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}}}]);