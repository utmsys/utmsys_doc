"use strict";(self.webpackChunkutm_doc=self.webpackChunkutm_doc||[]).push([[5615],{4857:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>r});const s=JSON.parse('{"id":"System_Config/RDK X5 Module/network_blueteeth","title":"5.2.1 Network & Blueteeth ","description":"This chapter mainly introduces how to modify the wired and wireless network configurations of the development board.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/05_System_Config/02_RDK X5 Module/01_network_blueteeth.md","sourceDirName":"05_System_Config/02_RDK X5 Module","slug":"/System_Config/RDK X5 Module/network_blueteeth","permalink":"/en/System_Config/RDK X5 Module/network_blueteeth","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"5.2.1 Network & Blueteeth ","source":"https://wiki.utmsys.org/System_Config/RDK%20X5%20Module/network_blueteeth"},"sidebar":"tutorialSidebar","previous":{"title":"5.2 RDK X5 Module","permalink":"/en/02_RDK X5 Module"},"next":{"title":"5.2.2 srpi-config tool config ","permalink":"/en/System_Config/RDK X5 Module/srpi-config"}}');var t=i(4848),o=i(8453);const d={title:"5.2.1 Network & Blueteeth ",source:"https://wiki.utmsys.org/System_Config/RDK%20X5%20Module/network_blueteeth"},c=void 0,a={},r=[{value:"Wired Network: RDK X5 (&gt;= 3.3.0) RDK X3 (&gt;= 3.0.2",id:"wired-network-rdk-x5--330-rdk-x3--302",level:2},{value:"[shell] Modify static IP",id:"shell-modify-static-ip",level:3},{value:"[shell] Modify DHCP",id:"shell-modify-dhcp",level:3},{value:"[shell] Modify MAC address",id:"shell-modify-mac-address",level:3},{value:"[Desktop] Modify static IP",id:"desktop-modify-static-ip",level:3},{value:"[Desktop] Modify DHCP",id:"desktop-modify-dhcp",level:3},{value:"[Desktop] Modify MAC address",id:"desktop-modify-mac-address",level:3},{value:"[Desktop] Configuration",id:"desktop-configuration",level:3},{value:"Wired Network: RDK X5 (&lt; 3.3.0) RDK X3 (&lt; 3.0.2",id:"wired-network-rdk-x5--330-rdk-x3--302-1",level:2},{value:"Modify static IP",id:"modify-static-ip",level:3},{value:"Modify DHCP",id:"modify-dhcp",level:3},{value:"Modify MAC address",id:"modify-mac-address",level:3},{value:"Wireless",id:"wireless",level:2},{value:"Station",id:"station",level:3},{value:"Soft AP",id:"soft-ap",level:3},{value:"DNS",id:"dns",level:2},{value:"System",id:"system",level:2},{value:"Bluetooth",id:"bluetooth",level:2},{value:"Initialization",id:"initialization",level:3},{value:"Communication",id:"communication",level:3},{value:"USB",id:"usb",level:3},{value:"Network",id:"network",level:3}];function l(e){const n={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"This chapter mainly introduces how to modify the wired and wireless network configurations of the development board."}),"\n",(0,t.jsx)(n.h2,{id:"wired-network-rdk-x5--330-rdk-x3--302",children:"Wired Network: RDK X5 (>= 3.3.0) RDK X3 (>= 3.0.2"}),"\n",(0,t.jsxs)(n.p,{children:["The development board's wired network uses a static IP configuration by default, with an initial IP address of ",(0,t.jsx)(n.code,{children:"192.168.127.10"}),". Users can switch between static and DHCP modes using the following methods."]}),"\n",(0,t.jsx)(n.h3,{id:"shell-modify-static-ip",children:"[shell] Modify static IP"}),"\n",(0,t.jsxs)(n.p,{children:["The static network configuration of the development board is saved in ",(0,t.jsx)(n.code,{children:"/etc/NetworkManager/system-connections/netplan-eth0.nmconnection"})," a file. By modifying ",(0,t.jsx)(n.code,{children:"address1"})," the fields, you can modify the static IP configuration. ",(0,t.jsx)(n.code,{children:"route-metri"})," It is the network priority configuration. It is set ",(0,t.jsx)(n.code,{children:"700"})," to make the wired network have a lower priority. When both wired and wireless networks are enabled at the same time, the wireless network will be used first."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"sudo vim /etc/NetworkManager/system-connections/netplan-eth0.nmconnection\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"[connection]\nid=netplan-eth0\nuuid=f6f8b5a7-9e23-49b2-a792-dc589b3d3e88\ntype=ethernet\ninterface-name=eth0\ntimestamp=1754294545\n\n[ethernet]\nwake-on-lan=0\n\n[ipv4]\naddress1=192.168.127.10/24,192.168.127.1\ndns=8.8.8.8;8.8.4.4;\nmethod=manual\nroute-metric=700\n\n[ipv6]\naddr-gen-mode=eui64\nmethod=ignore\n\n[proxy]\n"})}),"\n",(0,t.jsxs)(n.p,{children:["After the modification is completed, enter ",(0,t.jsx)(n.code,{children:"sudo restart_network"})," the command in the command line to make the configuration take effect."]}),"\n",(0,t.jsx)(n.h3,{id:"shell-modify-dhcp",children:"[shell] Modify DHCP"}),"\n",(0,t.jsxs)(n.p,{children:["Modify ",(0,t.jsx)(n.code,{children:"[ipv4]"})," the fields, keeping only ",(0,t.jsx)(n.code,{children:"method=auto"})," and ",(0,t.jsx)(n.code,{children:"route-metric=700"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"[ipv4]\nmethod=auto\nroute-metric=700\n"})}),"\n",(0,t.jsx)(n.p,{children:"After the modification is complete, enter the sudo restart_network command in the command line to make the configuration take effect."}),"\n",(0,t.jsx)(n.h3,{id:"shell-modify-mac-address",children:"[shell] Modify MAC address"}),"\n",(0,t.jsxs)(n.p,{children:["Modify ",(0,t.jsx)(n.code,{children:"[ethernet]"})," the field, add ",(0,t.jsx)(n.code,{children:"cloned-mac-address=12:34:56:78:9A:BA"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"[ethernet]\ncloned-mac-address=12:34:56:78:9A:BA\nwake-on-lan=0\n"})}),"\n",(0,t.jsx)(n.p,{children:"After the modification is complete, reboot the system for the configuration to take effect."}),"\n",(0,t.jsx)(n.h3,{id:"desktop-modify-static-ip",children:"[Desktop] Modify static IP"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/02_System_configuration/image/network/image-edid.png",alt:"image-edid"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/02_System_configuration/image/network/image-edid2.png",alt:"image-edid2"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/02_System_configuration/image/network/image-setip.png",alt:"image-setip"})}),"\n",(0,t.jsx)(n.h3,{id:"desktop-modify-dhcp",children:"[Desktop] Modify DHCP"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/02_System_configuration/image/network/image-dhcp.png",alt:"image-dhcp"})}),"\n",(0,t.jsx)(n.h3,{id:"desktop-modify-mac-address",children:"[Desktop] Modify MAC address"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/02_System_configuration/image/network/image-mac.png",alt:"image-mac"})}),"\n",(0,t.jsx)(n.h3,{id:"desktop-configuration",children:"[Desktop] Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["Click it ",(0,t.jsx)(n.code,{children:"netplan-eth0"})," to make the configuration take effect."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/02_System_configuration/image/network/image-enable.png",alt:"image-enable"})}),"\n",(0,t.jsx)(n.h2,{id:"wired-network-rdk-x5--330-rdk-x3--302-1",children:"Wired Network: RDK X5 (< 3.3.0) RDK X3 (< 3.0.2"}),"\n",(0,t.jsxs)(n.p,{children:["Video: ",(0,t.jsx)(n.a,{href:"https://www.bilibili.com/video/BV1rm4y1E73q/?p=11",children:"https://www.bilibili.com/video/BV1rm4y1E73q/?p=11"})]}),"\n",(0,t.jsxs)(n.p,{children:["The development board's wired network uses a static IP configuration by default, with an initial IP address of ",(0,t.jsx)(n.code,{children:"192.168.127.10"}),". Users can switch between static and DHCP modes using the following methods."]}),"\n",(0,t.jsx)(n.h3,{id:"modify-static-ip",children:"Modify static IP"}),"\n",(0,t.jsxs)(n.p,{children:["The static network configuration of the development board is saved in ",(0,t.jsx)(n.code,{children:"/etc/network/interfaces"})," a file. By modifying the fields such as ",(0,t.jsx)(n.code,{children:"address"}),", ",(0,t.jsx)(n.code,{children:"netmask"}),", ",(0,t.jsx)(n.code,{children:"gateway"})," and so on, you can modify the static IP configuration. ",(0,t.jsx)(n.code,{children:"metric"})," It is the network priority configuration. It is set ",(0,t.jsx)(n.code,{children:"700"})," to make the wired network have a lower priority. When both wired and wireless networks are enabled at the same time, the wireless network will be used first. For example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"sudo vim /etc/network/interfaces\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"# interfaces(5) file used by ifup(8) and ifdown(8)\n# Include files from /etc/network/interfaces.d:\nsource-directory /etc/network/interfaces.d\nauto eth0\niface eth0 inet static\n    pre-up /etc/set_mac_address.sh\n    address 192.168.127.10\n    netmask 255.255.255.0\n    gateway 192.168.127.1\n    metric 700\n"})}),"\n",(0,t.jsxs)(n.p,{children:["After the modification is completed, enter ",(0,t.jsx)(n.code,{children:"sudo restart_network"})," the command in the command line to make the configuration take effect."]}),"\n",(0,t.jsx)(n.h3,{id:"modify-dhcp",children:"Modify DHCP"}),"\n",(0,t.jsx)(n.p,{children:"DHCP (Dynamic Host Configuration Protocol) is usually used in a local area network environment. Its main function is to centrally manage and allocate IP addresses, so that hosts in the network environment can dynamically obtain information such as IP addresses, gateway addresses, DNS server addresses, etc., and can improve the utilization rate of addresses."}),"\n",(0,t.jsxs)(n.p,{children:["The DHCP network configuration of the development board is saved in ",(0,t.jsx)(n.code,{children:"/etc/network/interfaces"})," a file. By modifying the eth0 related configuration, the DHCP mode can be modified. For example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"sudo vim /etc/network/interfaces\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"source-directory /etc/network/interfaces.d\nauto lo\niface lo inet loopback\nauto eth0\niface eth0 inet dhcp\n    metric 700\n"})}),"\n",(0,t.jsxs)(n.p,{children:["After the modification is completed, enter ",(0,t.jsx)(n.code,{children:"sudo restart_network"})," the command in the command line to make the configuration take effect."]}),"\n",(0,t.jsx)(n.h3,{id:"modify-mac-address",children:"Modify MAC address"}),"\n",(0,t.jsxs)(n.p,{children:["If you need to modify the default MAC address of the development board, you can ",(0,t.jsx)(n.code,{children:"/etc/network/interfaces"})," add ",(0,t.jsx)(n.code,{children:"pre-up"})," configuration information to the file and specify the MAC address you need. For example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"sudo vim /etc/network/interfaces\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"# interfaces(5) file used by ifup(8) and ifdown(8)\n# Include files from /etc/network/interfaces.d:\nsource-directory /etc/network/interfaces.d\nauto eth0\niface eth0 inet static\n    pre-up /etc/set_mac_address.sh\n    address 192.168.127.10\n    netmask 255.255.255.0\n    gateway 192.168.127.1\n    metric 700\n    pre-up ifconfig eth0 hw ether 00:11:22:9f:51:27\n"})}),"\n",(0,t.jsxs)(n.p,{children:["After the modification is complete, ",(0,t.jsx)(n.code,{children:"reboot"})," restart the system to make the configuration take effect."]}),"\n",(0,t.jsx)(n.h2,{id:"wireless",children:"Wireless"}),"\n",(0,t.jsxs)(n.p,{children:["Video: ",(0,t.jsx)(n.a,{href:"https://www.bilibili.com/video/BV1rm4y1E73q/?p=12",children:"https://www.bilibili.com/video/BV1rm4y1E73q/?p=12"})]}),"\n",(0,t.jsx)(n.p,{children:"The development board integrates a 2.4GHz wireless WiFi module that supports both Soft AP and Station modes. It runs in Station mode by default. The following describes how to use both modes."}),"\n",(0,t.jsx)(n.h3,{id:"station",children:"Station"}),"\n",(0,t.jsx)(n.p,{children:"In Station mode, the development board acts as a client and connects to the router's wireless hotspot to connect to the Internet."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["For users using the Ubuntu Desktop version, click the Wi-Fi icon in the upper right corner of the desktop, select the corresponding hotspot and enter the password to complete the network configuration, as shown below:",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/02_System_configuration/image/network/image-wifi-config.jpeg",alt:"image-wifi-config"})]}),"\n",(0,t.jsx)(n.li,{children:"For users using the Ubuntu Server version, you can complete the wireless network configuration through the command line. The steps are as follows:"}),"\n"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"sudo nmcli device wifi rescan"})," the command to scan hotspots. If the following message is returned, it means that the scan is too frequent and you need to try again later.","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"root@ubuntu:~# sudo nmcli device wifi rescan\nError: Scanning not allowed immediately following previous scan.\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"sudo nmcli device wifi list"})," the command to list the scanned hotspots"]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:'sudo wifi_connect "SSID" "PASSWD"'})," the command to connect to the hotspot, and the following information is returned, indicating that the network connection is successful","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"root@ubuntu:~# sudo wifi_connect \"WiFi-Test\" \"12345678\" \nDevice 'wlan0' successfully activated with 'd7468833-4195-45aa-aa33-3d43da86e1a7'.\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"soft-ap",children:"Soft AP"}),"\n",(0,t.jsx)(n.p,{children:"The development board's wireless network runs in Station mode by default. To use Soft AP mode, follow the steps below to configure it."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Installation ",(0,t.jsx)(n.code,{children:"hostapd"})," and ",(0,t.jsx)(n.code,{children:"isc-dhcp-server"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"sudo apt update\nsudo apt install hostapd\nsudo apt install isc-dhcp-server\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Run ",(0,t.jsx)(n.code,{children:"sudo vim /etc/hostapd.conf"})," the command to configure ",(0,t.jsx)(n.code,{children:"hostapd.conf"}),", focusing on the following fields:","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"interface=wlan0 #\u4f5c\u4e3aAP\u70ed\u70b9\u7684\u7f51\u5361\nssid=Sunrise #WiFi\u540d\u5b57\nwpa=2 #0\u4e3aWPA 2\u4e3aWPA2 \u4e00\u822c\u4e3a2\nwpa_key_mgmt=WPA-PSK #\u52a0\u5bc6\u7b97\u6cd5 \u4e00\u822c\u4e3aWPA-PSK\nwpa_passphrase=12345678 #\u5bc6\u7801\nwpa_pairwise=CCMP #\u52a0\u5bc6\u534f\u8bae\uff0c\u4e00\u822c\u4e3aCCMP\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["To configure a hotspot without a password, ",(0,t.jsx)(n.code,{children:"hostapd.conf"})," add the following to the file:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"interface=wlan0\ndriver=nl80211\nctrl_interface=/var/run/hostapd\nssid=Sunrise\nchannel=6\nieee80211n=1\nhw_mode=g\nignore_broadcast_ssid=0\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["To configure a hotspot with a password, ",(0,t.jsx)(n.code,{children:"hostapd.conf"})," add the following to the file:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"interface=wlan0\ndriver=nl80211\nctrl_interface=/var/run/hostapd\nssid=Sunrise\nchannel=6\nieee80211n=1\nhw_mode=g\nignore_broadcast_ssid=0\nwpa=2\nwpa_key_mgmt=WPA-PSK\nwpa_pairwise=CCMP\nwpa_passphrase=12345678\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Configuration ",(0,t.jsx)(n.code,{children:"isc-dhcp-server"})," file, the steps are as follows:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Execute the ",(0,t.jsx)(n.code,{children:"sudo vim /etc/default/isc-dhcp-server"})," modification ",(0,t.jsx)(n.code,{children:"isc-dhcp-server"})," file and add the network interface defined as follows:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'INTERFACESv4="wlan0"\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Execute the ",(0,t.jsx)(n.code,{children:"sudo vim /etc/dhcp/dhcpd.conf"})," modification ",(0,t.jsx)(n.code,{children:"dhcpd.conf"})," file and uncomment the following fields:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"authoritative;\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Then ",(0,t.jsx)(n.code,{children:"/etc/dhcp/dhcpd.conf"})," add the following configuration at the end of the file:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"subnet 10.5.5.0 netmask 255.255.255.0 { #\u7f51\u6bb5\u548c\u5b50\u7f51\u63a9\u7801\n  range 10.5.5.100 10.5.5.254;#\u53ef\u83b7\u53d6\u7684IP\u8303\u56f4\n  option subnet-mask 255.255.255.0; #\u5b50\u7f51\u63a9\u7801\n  option routers 10.5.5.1;#\u9ed8\u8ba4\u7f51\u5173\n  option broadcast-address 10.5.5.31;#\u5e7f\u64ad\u5730\u5740\n  default-lease-time 600;#\u9ed8\u8ba4\u79df\u7ea6\u671f\u9650\uff0c\u5355\u4f4d\u79d2\n  max-lease-time 7200;#\u6700\u957f\u79df\u7ea6\u671f\u9650\uff0c\u5355\u4f4d\u79d2\n}\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Stop ",(0,t.jsx)(n.code,{children:"wpa_supplicant"})," the service and restart it ",(0,t.jsx)(n.code,{children:"wlan0"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"systemctl mask wpa_supplicant\nsystemctl stop wpa_supplicant\nip addr flush dev wlan0\nsleep 0.5\nifconfig wlan0 down\nsleep 1\nifconfig wlan0 up\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"hostapd"})," Start the service as follows","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Execute ",(0,t.jsx)(n.code,{children:"sudo hostapd -B /etc/hostapd.conf"})," Command"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'root@ubuntu:~# sudo hostapd -B /etc/hostapd.conf\n Configuration file: /etc/hostapd.conf\n Using interface wlan0 with hwaddr 08:e9:f6:af:18:26 and ssid "sunrise"\n wlan0: interface state UNINITIALIZED->ENABLED\n wlan0: AP-ENABLED\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"ifconfig"})," the command to configure the IP and network segment of the wireless interface ",(0,t.jsx)(n.code,{children:"wlan0"}),". Make sure to keep it consistent with the configuration in step 3."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo ifconfig wlan0 10.5.5.1 netmask 255.255.255.0\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Finally, start ",(0,t.jsx)(n.code,{children:"dhcp"})," the server and connect to the hotspot to ",(0,t.jsx)(n.code,{children:"10.5.5.100"})," assign ",(0,t.jsx)(n.code,{children:"10.5.5.255"})," an IP address to the client."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo ifconfig wlan0 10.5.5.1 netmask 255.255.255.0\nsudo systemctl start isc-dhcp-server\nsudo systemctl enable isc-dhcp-server\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Connect the development board hotspot, e.g.",(0,t.jsx)(n.code,{children:"sunrise"}),(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/02_System_configuration/image/network/image-20220601203025803.png",alt:"image-20220601203025803"})]}),"\n",(0,t.jsxs)(n.li,{children:["To switch back to ",(0,t.jsx)(n.code,{children:"Station"})," the mode, proceed as follows:\n[RDK X5]","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# \u505c\u6b62 hostapd\nkillall -9 hostapd\n# \u6e05\u9664 wlan0 \u7684\u5730\u5740\nip addr flush dev wlan0\nsleep 0.5\nifconfig wlan0 down\nsleep 1\nifconfig wlan0 up\n# \u91cd\u542f wpa_supplicant\nsystemctl unmask wpa_supplicant\nsystemctl restart wpa_supplicant\n#\u91cd\u88c5wifi\u9a71\u52a8\nrmmod aic8800_fdrv \nmodprobe aic8800_fdrv\n# \u8fde\u63a5\u70ed\u70b9,\uff0c\u5177\u4f53\u64cd\u4f5c\u53ef\u4ee5\u67e5\u770b\u4e0a\u4e00\u7ae0\u8282 \u201c\u65e0\u7ebf\u7f51\u7edc\u201d\nwifi_connect "WiFi-Test" "12345678"\n'})}),"\n","[Other]","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# \u505c\u6b62 hostapd\nkillall -9 hostapd\n# \u6e05\u9664 wlan0 \u7684\u5730\u5740\nip addr flush dev wlan0\nsleep 0.5\nifconfig wlan0 down\nsleep 1\nifconfig wlan0 up\n# \u91cd\u542f wpa_supplicant\nsystemctl unmask wpa_supplicant\nsystemctl restart wpa_supplicant\n# \u8fde\u63a5\u70ed\u70b9,\uff0c\u5177\u4f53\u64cd\u4f5c\u53ef\u4ee5\u67e5\u770b\u4e0a\u4e00\u7ae0\u8282 \u201c\u65e0\u7ebf\u7f51\u7edc\u201d\nwifi_connect "WiFi-Test" "12345678"\n'})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"dns",children:"DNS"}),"\n",(0,t.jsxs)(n.p,{children:["Video: ",(0,t.jsx)(n.a,{href:"https://www.bilibili.com/video/BV1rm4y1E73q/?p=13",children:"https://www.bilibili.com/video/BV1rm4y1E73q/?p=13"})]}),"\n",(0,t.jsx)(n.p,{children:"DNS (Domain Name Server) is a server that converts domain names and their corresponding IP addresses."}),"\n",(0,t.jsxs)(n.p,{children:["The DNS configuration of the development board is managed through ",(0,t.jsx)(n.code,{children:"/etc/systemd/resolved.conf"})," a file. Users can complete the DNS related configuration by modifying the file. The steps are as follows:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Modify ",(0,t.jsx)(n.code,{children:"resolved.conf"})," the file and add the DNS server address, for example:","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"DNS=8.8.8.8 114.114.114.114\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Enable DNS configuration using the following command:","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo systemctl restart systemd-resolved\nsudo systemctl enable systemd-resolved\nsudo mv /etc/resolv.conf  /etc/resolv.conf.bak\nsudo ln -s /run/systemd/resolve/resolv.conf /etc/\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"system",children:"System"}),"\n",(0,t.jsxs)(n.p,{children:["For the sake of system security and stability, it is recommended that users ",(0,t.jsx)(n.code,{children:"apt"})," update the system through commands after installing the system."]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"/etc/apt/source.list"})," file contains ",(0,t.jsx)(n.code,{children:"apt"})," the command's software source list. Before installing the software, you need to ",(0,t.jsx)(n.code,{children:"apt"})," update the package list using the command."]}),"\n",(0,t.jsx)(n.p,{children:"First, open the terminal command line and enter the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt update\n"})}),"\n",(0,t.jsx)(n.p,{children:"Next, upgrade all installed packages to the latest versions using the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt full-upgrade\n"})}),"\n",(0,t.jsxs)(n.p,{children:["After executing ",(0,t.jsx)(n.code,{children:"apt full-upgrade"})," the command, the driver, kernel files, and some system software may be reinstalled. It is recommended that users manually restart the device for the update to take effect. The command is as follows:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo reboot\n"})}),"\n",(0,t.jsx)(n.h2,{id:"bluetooth",children:"Bluetooth"}),"\n",(0,t.jsx)(n.h3,{id:"initialization",children:"Initialization"}),"\n",(0,t.jsxs)(n.p,{children:["If the Bluetooth function of the development board is not enabled by default and ",(0,t.jsx)(n.code,{children:"hciconfig"})," the device cannot be found, you can execute ",(0,t.jsx)(n.code,{children:"/usr/bin/startbt.sh"})," the script to initialize it. The script completes the following tasks:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Complete Bluetooth initialization"}),"\n",(0,t.jsxs)(n.li,{children:["Execute ",(0,t.jsx)(n.code,{children:"hciconfig hci0 up"})," to complete Bluetooth Link Up"]}),"\n",(0,t.jsxs)(n.li,{children:["Execute ",(0,t.jsx)(n.code,{children:"hciconfig hci0 piscan"})," Bluetooth scan"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Video: ",(0,t.jsx)(n.a,{href:"https://www.bilibili.com/video/BV1rm4y1E73q/?p=9",children:"https://www.bilibili.com/video/BV1rm4y1E73q/?p=9"})]}),"\n",(0,t.jsx)(n.p,{children:"The log after the script is successfully executed is as follows:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/02_System_configuration/image/hardware_interface/image-20220601172145987.png",alt:"image-20220601172145987"})}),"\n",(0,t.jsx)(n.p,{children:"In addition, users can use the command to query whether the Bluetooth process is normal. The command is as follows:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'ps ax | grep "/usr/bin/dbus-daemon\\|/usr/lib/bluetooth/bluetoothd"\n/usr/bin/dbus-daemon\n\n/usr/lib/bluetooth/bluetoothd\n'})}),"\n",(0,t.jsx)(n.h3,{id:"communication",children:"Communication"}),"\n",(0,t.jsx)(n.p,{children:"In order to give full play to the expansion capabilities of the development board, the current hardware design has integrated a variety of interfaces and peripheral resources."}),"\n",(0,t.jsx)(n.p,{children:"Due to limitations in interface layout and hardware resource allocation, the development board cannot fully replicate all communication interfaces of the Bluetooth module."}),"\n",(0,t.jsxs)(n.p,{children:["Currently, only ",(0,t.jsx)(n.code,{children:"BT_RX"})," ",(0,t.jsx)(n.code,{children:"BT_TX"})," the two-line mode is provided, which can meet basic functions such as AT command interaction and data transmission without real-time requirements."]}),"\n",(0,t.jsx)(n.p,{children:"The Bluetooth module based on the UART interface has different interface connection methods and corresponding functions as follows:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Basic Communication Mode (UART Only)"}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Interface pins:",(0,t.jsx)(n.code,{children:"BT_RX"})," ",(0,t.jsx)(n.code,{children:"BT_TX"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Functional features: UART-based asynchronous serial data communication (such as AT command interaction and low-speed data transmission) without a flow control mechanism. When the baud rate is overloaded or a large amount of data is continuously transmitted, there is a risk of data packet loss and buffer overflow."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"Enhanced transmission mode (adding hardware flow control)"}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Interface pins:",(0,t.jsx)(n.code,{children:"BT_RX"})," ",(0,t.jsx)(n.code,{children:"BT_TX"})," ",(0,t.jsx)(n.code,{children:"BT_CTS"})," ",(0,t.jsx)(n.code,{children:"BT_RTS"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Features: It can effectively avoid the risk of data packet loss and buffer overflow, and supports A2DP high-fidelity one-way audio streaming transmission."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"Voice communication mode (PCM synchronous interface)"}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Interface pins:",(0,t.jsx)(n.code,{children:"PCM_SYNC"})," ",(0,t.jsx)(n.code,{children:"PCM_DIN"})," ",(0,t.jsx)(n.code,{children:"PCM_CLK"})," ",(0,t.jsx)(n.code,{children:"PCM_DOUT"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Features: Supports real-time two-way audio transmission based on SCO link, such as HPF/HSP"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"usb",children:"USB"}),"\n",(0,t.jsxs)(n.p,{children:["If you need to make in-depth use of Bluetooth functions, such as ",(0,t.jsx)(n.code,{children:"SPP\uff08\u84dd\u7259\u865a\u62df\u4e32\u53e3\uff09"})," achieving high-speed and stable communication in mode, ",(0,t.jsx)(n.code,{children:"PAN\uff08\u84dd\u7259\u865a\u62df\u7f51\u5361\uff09"})," ensuring bandwidth quality in mode, or ",(0,t.jsx)(n.code,{children:"A2DP\uff08\u9ad8\u4fdd\u771f\u5355\u5411\u97f3\u9891\u6d41\uff09"})," avoiding audio interruption in mode, it is recommended to use it first ",(0,t.jsx)(n.code,{children:"USB \u63a5\u53e3\u84dd\u7259\u6a21\u5757"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["The development board has integrated ",(0,t.jsx)(n.code,{children:"USB2.0-BT"})," common ",(0,t.jsx)(n.code,{children:"CSR8510 A10"})," Bluetooth drivers such as, and can directly support most firmware-free USB Bluetooth modules."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/02_System_configuration/image/hardware_interface/image-USB2.0-BT.png",alt:"image-USB2.0-BT"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/02_System_configuration/image/hardware_interface/image-CSR8510.png",alt:"image-CSR8510"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/02_System_configuration/image/hardware_interface/image-hci1.png",alt:"image-hci1"})}),"\n",(0,t.jsxs)(n.p,{children:["For ",(0,t.jsx)(n.code,{children:"Realtek"})," the series Bluetooth modules, additional ",(0,t.jsx)(n.code,{children:"\u56fa\u4ef6"})," support is required. Please obtain the firmware adapted for the Linux platform from the module manufacturer and place it in the designated directory before normal use."]}),"\n",(0,t.jsx)(n.h3,{id:"network",children:"Network"}),"\n",(0,t.jsxs)(n.p,{children:["Execute ",(0,t.jsx)(n.code,{children:"sudo bluetoothctl"})," to enter the Bluetooth configuration interface in interactive mode. Device information similar to the figure below appears, indicating that Bluetooth has been recognized. Then ",(0,t.jsx)(n.code,{children:"show"})," use it to view Bluetooth information and pay attention to Bluetooth ",(0,t.jsx)(n.code,{children:"powered"})," status ",(0,t.jsx)(n.code,{children:"discoverable"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/02_System_configuration/image/hardware_interface/image-20220601172604051.png",alt:"image-20220601172604051"})}),"\n",(0,t.jsxs)(n.p,{children:["Execute ",(0,t.jsx)(n.code,{children:"power on"})," Enable Bluetooth, as shown below:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/02_System_configuration/image/hardware_interface/image-20220601172501882.png",alt:"image-20220601172501882"})}),"\n",(0,t.jsxs)(n.p,{children:["In order to enable Bluetooth to be discovered by nearby devices, you need to ",(0,t.jsx)(n.code,{children:"discoverable on"})," enable Bluetooth and turn on the Bluetooth discoverability property, as shown in the following figure:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/02_System_configuration/image/hardware_interface/image-20220601172648853.png",alt:"image-20220601172648853"})}),"\n",(0,t.jsxs)(n.p,{children:["At this point, use your phone or computer to scan Bluetooth to find ",(0,t.jsx)(n.code,{children:"ubuntu"})," the Bluetooth device with this name:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/02_System_configuration/image/hardware_interface/image-20220601175322650.png",alt:"image-20220601175322650"})}),"\n",(0,t.jsxs)(n.p,{children:["Next, test the active scanning function of Bluetooth. ",(0,t.jsx)(n.code,{children:"bluetoothctl"})," Enter in the interactive interface ",(0,t.jsx)(n.code,{children:"scan on"})," to turn on active scanning. It will periodically print nearby devices. You can see that my mobile device has been found. ",(0,t.jsx)(n.code,{children:"scan off"})," Turn off the scanning function and print a summary of the scanned Bluetooth devices:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/02_System_configuration/image/hardware_interface/image-20220601154131158.png",alt:"image-20220601154131158"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/02_System_configuration/image/hardware_interface/image-20220601154253947.png",alt:"image-20220601154253947"})}),"\n",(0,t.jsx)(n.p,{children:"Then it is pairing with other Bluetooth:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Pairing command: ",(0,t.jsx)(n.code,{children:"pair [targetMAC] "}),", enter the command and follow the prompts ",(0,t.jsx)(n.code,{children:"yes"}),". The other Bluetooth device selects ",(0,t.jsx)(n.code,{children:"\u914d\u5bf9"})," an option to complete the pairing."]}),"\n",(0,t.jsxs)(n.li,{children:["After pairing is successful, you can use it ",(0,t.jsx)(n.code,{children:"trust [targetMAC]"})," to automatically connect next time"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/02_System_configuration/image/hardware_interface/image-20220601154414717.png",alt:"image-20220601154414717"})}),"\n",(0,t.jsxs)(n.p,{children:["After the above operations, the basic functions of Bluetooth scanning and pairing are completed. If you need to use more functions, you can refer ",(0,t.jsx)(n.code,{children:"BlueZ"})," to the official help instructions."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>c});var s=i(6540);const t={},o=s.createContext(t);function d(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);